{{- /* 提取图片优先级：cover.image > thumbnail > 文章中第一张图片 */ -}}
{{- $image := "" -}}
{{- with .Params.cover.image -}}
  {{- $image = . -}}
{{- else with .Params.thumbnail -}}
  {{- $image = . -}}
{{- else -}}
  {{- $matches := findRE `!\[.*?\]\((/[^)]+)\)` .RawContent 1 -}}
  {{- with $matches -}}
    {{- $image = replaceRE `!\[.*?\]\((/[^)]+)\)` "$1" (index . 0) -}}
  {{- end -}}
{{- end -}}

<meta property="og:title" content="{{ .Title | default site.Title }}" />
<meta property="og:description" content="{{ with .Description | default .Summary | default site.Params.description }}{{ . }}{{ end }}" />
<meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}" />
<meta property="og:url" content="{{ .Permalink }}" />

{{- with $image -}}
<meta property="og:image" content="{{ (. | absURL) | default " " }}" />
{{- end -}}

{{- with site.Params.social.facebook_admin }}
<meta property="fb:admins" content="{{ . }}" />
{{- end -}}

{{- with .Params.audio }}
<meta property="og:audio" content="{{ . }}" />
{{- end -}}

{{- with .Params.locale }}
<meta property="og:locale" content="{{ . }}" />
{{- end -}}

{{- if .IsPage }}
{{- with .Site.Params.social.facebook 
}}
<meta property="article:author" content="https://facebook.com/{{ . }}" />
{{- end }}

{{- with .Site.Params.social.facebook_page }}
<meta property="article:publisher" content="https://facebook.com/{{ . }}" />
{{- end }}

<meta property="article:published_time" content="{{ (time .Date).Format "2006-01-02T15:04:05-07:00" | safeHTML }}" />

{{- with .Lastmod }}
<meta property="article:modified_time" content="{{ (time .).Format "2006-01-02T15:04:05-07:00" | safeHTML }}" />
{{- end }}

{{- with .Params.tags }}
{{- range . }}
<meta property="article:tag" content="{{ . }}" />
{{ end }}
{{- end }}
{{- end -}} 